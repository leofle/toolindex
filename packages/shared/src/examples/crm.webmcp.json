{
  "manifest_version": "0.1",
  "origin": "https://crm.example.com",
  "tools": [
    {
      "name": "search_contacts",
      "description": "Search CRM contacts by name, email, company, or custom fields. Returns paginated results with key contact metadata.",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": { "type": "string", "description": "Free-text search across name, email, and company." },
          "company": { "type": "string", "description": "Filter by company name." },
          "tag": { "type": "string", "description": "Filter by contact tag." },
          "page": { "type": "integer", "minimum": 1, "default": 1 },
          "per_page": { "type": "integer", "minimum": 1, "maximum": 100, "default": 25 }
        },
        "required": ["query"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "contacts": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "contact_id": { "type": "string" },
                "name": { "type": "string" },
                "email": { "type": "string", "format": "email" },
                "company": { "type": "string" },
                "title": { "type": "string" },
                "last_activity": { "type": "string", "format": "date-time" }
              }
            }
          },
          "total": { "type": "integer" },
          "page": { "type": "integer" }
        },
        "required": ["contacts", "total", "page"],
        "additionalProperties": false
      },
      "risk_level": "low",
      "requires_user_confirm": false,
      "pricing": { "model": "freemium", "cost_estimate": "Free up to 1000 queries/month, then $0.005/query" },
      "tags": ["crm", "contacts", "search"],
      "version": "2.1.0"
    },
    {
      "name": "create_deal",
      "description": "Create a new deal in the sales pipeline. Associates with a contact and sets the initial stage, value, and expected close date.",
      "input_schema": {
        "type": "object",
        "properties": {
          "title": { "type": "string", "description": "Deal title." },
          "contact_id": { "type": "string", "description": "Associated contact." },
          "value": { "type": "number", "minimum": 0, "description": "Deal value in USD." },
          "currency": { "type": "string", "default": "USD", "description": "ISO 4217 currency code." },
          "stage": { "type": "string", "description": "Pipeline stage (e.g. 'qualified', 'proposal', 'negotiation')." },
          "expected_close": { "type": "string", "format": "date", "description": "Expected close date." }
        },
        "required": ["title", "contact_id", "value", "stage"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "deal_id": { "type": "string" },
          "title": { "type": "string" },
          "stage": { "type": "string" },
          "value": { "type": "number" },
          "currency": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" }
        },
        "required": ["deal_id", "title", "stage", "value", "currency", "created_at"],
        "additionalProperties": false
      },
      "risk_level": "medium",
      "requires_user_confirm": false,
      "pricing": { "model": "paid", "cost_estimate": "Included in Pro plan ($49/mo)" },
      "tags": ["crm", "deals", "pipeline"],
      "version": "2.1.0"
    },
    {
      "name": "update_deal_stage",
      "description": "Move a deal to a new stage in the pipeline. Triggers configured automations (email sequences, Slack notifications) for the new stage.",
      "input_schema": {
        "type": "object",
        "properties": {
          "deal_id": { "type": "string", "description": "The deal to update." },
          "stage": { "type": "string", "description": "New pipeline stage." },
          "note": { "type": "string", "maxLength": 1024, "description": "Optional note about the stage change." }
        },
        "required": ["deal_id", "stage"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "deal_id": { "type": "string" },
          "previous_stage": { "type": "string" },
          "current_stage": { "type": "string" },
          "updated_at": { "type": "string", "format": "date-time" }
        },
        "required": ["deal_id", "previous_stage", "current_stage", "updated_at"],
        "additionalProperties": false
      },
      "risk_level": "medium",
      "requires_user_confirm": false,
      "pricing": { "model": "paid", "cost_estimate": "Included in Pro plan ($49/mo)" },
      "tags": ["crm", "deals", "pipeline"],
      "version": "2.1.0"
    },
    {
      "name": "delete_contact",
      "description": "Permanently delete a contact and all associated data (deals, notes, activity history). This action is irreversible.",
      "input_schema": {
        "type": "object",
        "properties": {
          "contact_id": { "type": "string", "description": "The contact to delete." },
          "confirm_permanent": { "type": "boolean", "description": "Must be true to confirm permanent deletion." }
        },
        "required": ["contact_id", "confirm_permanent"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "deleted": { "type": "boolean" },
          "contact_id": { "type": "string" }
        },
        "required": ["deleted", "contact_id"],
        "additionalProperties": false
      },
      "risk_level": "critical",
      "requires_user_confirm": true,
      "pricing": { "model": "paid", "cost_estimate": "Included in Pro plan ($49/mo)" },
      "tags": ["crm", "contacts", "destructive"],
      "version": "2.1.0"
    }
  ],
  "auth": {
    "requires_login": true,
    "oauth_scopes": ["contacts:read", "contacts:write", "deals:read", "deals:write"]
  },
  "attestation": {
    "algo": "ES256",
    "public_key_jwk": {
      "kty": "EC",
      "crv": "P-256",
      "x": "f83OJ3D2xF1Bg8vub9tLe1gHMzV76e8Tus9uPHvRVEU",
      "y": "x_FEzRu9m36HLN_tue659LNpXW6pCyStikYjKIWI5a0"
    },
    "signature": "MEUCIQDxaKz0ko2wMbHGpEOH-6FDm2HPsaLMk_vu6jcyo3B3CQIgWN7SvfMJgBJTbMhNdDBHpqDQ5st3uP7ZGJij8cZMFjY",
    "signed_fields": ["manifest_version", "origin", "tools", "auth"]
  }
}
